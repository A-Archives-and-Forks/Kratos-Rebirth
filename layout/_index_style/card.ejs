<article class="kratos-hentry clearfix" itemscope itemtype="https://schema.org/Article">
    <div class="kratos-entry-border-new clearfix">
        <% if (post.sticky || post.top) { %>
            <div class="pin-top wrapper">
                <div class="pin-top inner"></div>
            </div>
        <% } %>
        <div class="kratos-entry-thumb-new">
            <a href="<%- url_for(post.path) %>">
                <img class="kratos-entry-thumb-new-img" src="<%- 
                    post.cover ? (
                        /^(#|\/\/|http(s)?:)/.test(post.cover) ? 
                        post.cover : 
                        url_for(
                            post.cover.startsWith('/') ? 
                            post.cover : 
                            post.path.replace(/(\/index)?\.html?$/, '') + '/' + post.cover
                        )
                    ) : theme.posts.default_cover
                %>" alt="<%- url_for(post.title) %>">
            </a>
        </div>
        <div class="kratos-post-inner-new">
            <header class="kratos-entry-header-new">
                    <%- list_categories(post.categories, {
                        show_count: false,
                        class: 'label',
                        style: 'none',
                        separator: ' '
                    }) %>
                <h2 class="kratos-entry-title-new"><a href="<%- url_for(post.path) %>" itemprop="mainEntityOfPage"><span itemprop="name headline"><%- post.title %><% if (post.subtitle) { %><sub><%- post.subtitle %></sub><% } %></span></a>
            </header>
            <div class="kratos-entry-content-new">
                <p itemProp="description">
                    <% if (post.excerpt) { %>
                        <%- strip_html(post.excerpt) %>
                    <% } else { %>
                        <%- truncate(strip_html(post.content), {length: 120}) %>
                    <% } %>
                </p>
            </div>
        </div>
        <footer class="kratos-post-meta-new">
            <span class="pull-left">
                <time datetime="<%= date_xml(post.date) %>" itemprop="datePublished">
                    <a><i class="fa fa-calendar"></i> <%- date(post.date, null) %></a>
                </time>
                <a>
                    <% if (post.tags.length) { %>
                        <i class="fa fa-tags"></i>
                        <%- list_tags(post.tags, {
                            show_count: false,
                            style: 'none',
                            amount: 3
                        }) %>
                    <% } %>
                </a>
                <% if (theme.visit_count.enable_at.includes("index")) { %>
                    <a>
                        <i class="fa fa-eye"></i>
                        <%- __('post_meta.read_count', (theme.visit_count.template._shared + theme.visit_count.template.index).replaceAll("$PATH", url_for(post.path))) %>
                    </a>
                <% } %>
                <% if (theme.comments.count.enable_at.includes("index") && post.comments) { %>
                    <a>
                        <i class="fa fa-commenting-o"></i>
                        <%- __('post_meta.comments_count', (theme.comments.count.template._shared + theme.comments.count.template.index).replaceAll("$PATH", url_for(post.path))) %>
                    </a>
                <% } %>
            </span>
            <span class="pull-right">
                <a class="read-more" href="<%- url_for(post.path) %>" title="<%- __('read_full') %>"><%- __('read_full') %><i class="fa fa-chevron-circle-right"></i></a>
            </span>
        </footer>
    </div>
</article>