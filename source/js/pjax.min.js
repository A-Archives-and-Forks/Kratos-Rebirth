(()=>{if(!window.history||!window.history.pushState||!window.history.replaceState)return;function p(){const e=document.getElementById("kratos-blog-post").offsetTop,i=document.getElementById("kratos-desktop-topnav").offsetHeight,o=i?e-i:0;window.scrollTo({top:o,behavior:"smooth"})}function d(e,i,o){let n=e.querySelector('meta[property="'+i+'"]');if(n)o?n.setAttribute("content",o):n.parentNode&&n.parentNode.removeChild(n);else{if(!o)return;n=e.createElement("meta"),n.setAttribute("property",i),n.setAttribute("content",o),e.head.appendChild(n)}}function m(e,i){const o=e.querySelector('meta[property="'+i+'"]');return o?o.getAttribute("content"):null}function u(e,i){if(document.title=e.title||"Untitled",i){const t=document.getElementById("main");typeof t.replaceWith=="function"?t.replaceWith(i.getElementById("main")):document.getElementById("main").innerHTML=e.content}else document.getElementById("main").innerHTML=e.content;const o=document.getElementById("main").getElementsByTagName("script");for(var n=0;n<o.length;n++){const t=o[n];if(!t.type||t.type.toLowerCase()==="text/javascript"){var s=document.createElement("script");s.setAttribute("type","text/javascript"),t.src?s.src=t.src:s.appendChild(document.createTextNode(t.text)),typeof t.replaceWith=="function"?t.replaceWith(s):(t.parentNode.insertBefore(s,t),t.parentNode.removeChild(t))}}d(document,"og:title",e.ogTitle),d(document,"og:url",e.ogUrl)}function f(e){return{title:e.title,ogTitle:m(e,"og:title"),ogUrl:m(e,"og:url"),content:e.getElementById("main").innerHTML}}function g(e){e.state&&(p(),typeof e.state.content>"u"?y(location.href,!1):u(e.state),window.dispatchEvent(r.complete))}window.addEventListener("popstate",g);const r={before:new Event("pjax:before"),success:new Event("pjax:success"),complete:new Event("pjax:complete"),error:new Event("pjax:error")};function y(e,i){const o=()=>{typeof load_comm<"u"&&load_comm!==null&&(load_comm=null),p(),NProgress.start(),window.dispatchEvent(r.before)},n=()=>{location.href=e,window.dispatchEvent(r.error)},s=a=>{window.dispatchEvent(r.success);const c=document.implementation.createHTMLDocument("pjax");if(c.documentElement.innerHTML=a,!!c.getElementById("main")){history.replaceState(f(document),document.title,location.href);const l=f(c);i&&window.history.pushState(l,l.title,e),u(l,c);const h=e.match(/\#.+$/);h&&$("body,html").animate({scrollTop:$(h[0]).offset().top-40},600)}else window.open(e);NProgress.done(),window.dispatchEvent(r.complete)},t=new XMLHttpRequest;t.onerror=function(a){console.error(a),n()},t.ontimeout=function(){n()},t.onreadystatechange=function(){t.readyState===4&&s(t.responseText)},t.open("GET",e,!0),t.timeout=6e3,o(),t.send()}})();
